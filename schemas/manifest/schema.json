{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "PiWebImportPluginManifestSchema",
  "title": "PiWeb import plug-in manifest schema",
  "description": "Describes a PiWeb import plug-in manifest.",
  "type": "object",
  "required": [
    "id",
    "title",
    "description",
    "provides"
  ],
  "additionalProperties": true,
  "properties": {
    "$schema": {
      "type": "string",
      "title": "Schema",
      "description": "Pointer to the schema against which this document should be validated."
    },
    "id": {
      "description": "The unique identifier of the plug-in",
      "type": "string"
    },
    "assemblyPath": {
      "description": "The path to the plug-in assembly.",
      "format": "uri-reference",
      "pattern": ".*\\.dll$",
      "type": "string"
    },
    "localesPath": {
      "description": "A custom path to the plug-in's localizations. Default is the folder 'locales'.",
      "format": "uri-reference",
      "type": "string"
    },
    "author": {
      "description": "The author of the plug-in",
      "type": "string"
    },
    "company": {
      "description": "The company that provided the plug-in",
      "type": "string"
    },
    "contact": {
      "description": "The contact email address of the plug-in author or company",
      "format": "email",
      "pattern": "^[\\w-\\\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$",
      "type": "string"
    },
    "homepage": {
      "description": "The homepage with details for the plug-in",
      "format": "uri-reference",
      "pattern": "https?:\/\/(www\\.)?[-a-zA-Z0-9@:%._\\\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\\\+.~#?&/=]*)",
      "type": "string"
    },
    "issueTracker": {
      "description": "The issue tracker for the plug-in",
      "format": "uri-reference",
      "pattern": "https?:\/\/(www\\.)?[-a-zA-Z0-9@:%._\\\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\\\+.~#?&/=]*)",
      "type": "string"
    },
    "licenseName": {
      "description": "The licence type of the plug-in",
      "type": "string",
      "enum": [
        "AFL-3.0",
        "Apache-2.0",
        "Artistic-2.0",
        "BSL-1.0",
        "BSD 2-Clause",
        "BSD-3-Clause",
        "BSD-3-Clause-Clear",
        "BSD-4-Clause",
        "0BSD",
        "CC",
        "CC0-1.0",
        "CC-BY-4.0",
        "CC-BY-SA-4.0",
        "WTFPL",
        "ECL-2.0",
        "EPL-1.0",
        "EPL-2.0",
        "EUPL-1.1",
        "AGPL-3.0",
        "GPL",
        "GPL-2.0",
        "GPL-3.0",
        "LGPL",
        "LGPL-2.1",
        "LGPL-3.0",
        "ISC",
        "LPPL-1.3c",
        "MS-PL",
        "MIT",
        "MPL-2.0",
        "OSL-3.0",
        "PostgreSQL",
        "OFL-1.1",
        "NCSA",
        "Unlicense",
        "Zlib"
      ]
    },
    "licenseUrl": {
      "description": "The licence url for the plug-in",
      "format": "uri-reference",
      "pattern": "https?:\/\/(www\\.)?[-a-zA-Z0-9@:%._\\\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\\\+.~#?&/=]*)",
      "type": "string"
    },
    "sourceCode": {
      "description": "The source code url for the plug-in",
      "format": "uri-reference",
      "pattern": "https?:\/\/(www\\.)?[-a-zA-Z0-9@:%._\\\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\\\+.~#?&/=]*)",
      "type": "string"
    },
    "documentation": {
      "description": "The documentation url for the plug-in",
      "format": "uri-reference",
      "pattern": "https?:\/\/(www\\.)?[-a-zA-Z0-9@:%._\\\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\\\+.~#?&/=]*)",
      "type": "string"
    },
    "version": {
      "description": "The version of the plug-in",
      "type": "string",
      "pattern": "^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)$",
      "$comment": "Pattern source was https://semver.org/#is-there-a-suggested-regular-expression-regex-to-check-a-semver-string but simplified"
    },
    "title": {
      "description": "The title of the plug-in",
      "type": "string"
    },
    "description": {
      "description": "The description of the plug-in",
      "type": "string"
    },
    "provides": {
      "oneOf": [
        {
          "type": "object",
          "required": [
            "type",
            "displayName",
            "summary"
          ],
          "additionalProperties": false,
          "properties": {
            "type": {
              "const": "ImportAutomation",
              "description": "The type of the plug-in is an import automation"
            },
            "displayName": {
              "type": "string",
              "description": "The display name of the plug-in import automation"
            },
            "summary": {
              "type": "string",
              "description": "The summary of the plug-in import automation"
            }
          }
        },
        {
          "type": "object",
          "required": [
            "type",
            "displayName"
          ],
          "additionalProperties": false,
          "properties": {
            "type": {
              "const": "ImportFormat",
              "description": "The type of the plug-in is an import format"
            },
            "displayName": {
              "type": "string",
              "description": "The display name of the plug-in import format"
            },
            "defaultPriority": {
              "type": "integer",
              "description": "The default priority of the plug-in import format execution. Built-in formats are using the range 100-1000. If the priority of a format is less than 100 then it is able to handle import files before the built-in formats. If the priority of a format is greater than 1000 the format will only be used if no built-in format handles the file."
            },
            "fileExtensions": {
              "type": "array",
              "description": "The associated file extensions of this format. This information is used to create masks for file selection dialogs. E.g. [\".txt\", \".csv\"]. Wildcards are not supported."
            }
          }
        }
      ]
    }
  }
}